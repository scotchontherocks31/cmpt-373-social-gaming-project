image: "zouzias/boost:latest"

before_script:
    - add-apt-repository 'deb http://archive.ubuntu.com/ubuntu/ focal main'
    - apt-get update && apt-get install -y clang-format cmake
    - mkdir build && cmake --no-warn-unused-cli -DCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=TRUE -DCMAKE_BUILD_TYPE:STRING=Debug -H. -B./build -G "Unix Makefiles"

lint:
    script:
        - find . -path ./build -prune -false -o -type f \( -name *.cpp -o -name *.h \) | xargs clang-format -style=llvm -dry-run
